<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper   
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"   
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
<mapper namespace="kr.spring.cinema.dao.CinemaMapper"><!--인터페이스명-자동매핑-->
	
	<!-- 영화관 총 수 -->
	<select id="selectCinemaRowCount" parameterType="map" resultType="integer">
		SELECT
			COUNT(*)
		FROM cinema
		<include refid="locationSelect"></include>
	</select>
	
	<!-- 영화관 목록 -->
	<select id="selectCinemaList" parameterType="map" resultType="cinemaVO">
		SELECT
			*
		FROM (SELECT a.*, rownum rnum
		FROM (SELECT
					c_num,
					<![CDATA[
	 				REPLACE(REPLACE(c_branch,'<','&lt;'),'&gt;') c_branch,
	 				]]>
	 				c_address,
	 				c_phone,
	 				c_theater,
	 				c_seat,
	 				c_parkable,
	 				c_filename
	 		FROM cinema
	 				<include refid="locationSelect"></include>
					)a)
				<![CDATA[
		 			WHERE rnum >= #{start} AND rnum <= #{end}
				]]>
	</select>
</mapper>							






